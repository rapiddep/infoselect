<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        function jitter(value, range = 0.05) { // ğŸ”¹ ì§€í„° ë²”ìœ„ ì¦ê°€
          let jittered = value + (Math.random() * range - range / 2);
          return Math.max(jittered, 0.31); // ìµœì†Œê°’ ë³´ì •
        }

        function getFontSize(baseSize, minSize = 18) {
          let scaleFactor = Math.min(1, window.innerHeight / 1000); // ğŸ”¹ ì„¸ë¡œ í¬ê¸° ê¸°ì¤€ìœ¼ë¡œ í°íŠ¸ ì¡°ì •
          return Math.max(minSize, baseSize * scaleFactor);
        }

        var rawData = [
          { name: 'ì„¤í–¥', acidRange: '0.5~0.8%', sugarRange: '10~13 Brix', acid: 0.65, sugar: 11.5, hardness: 'ë†’ìŒ' },
          { name: 'í•˜ì´ë² ë¦¬', acidRange: '0.4~0.6%', sugarRange: '12~14 Brix', acid: 0.5, sugar: 13, hardness: 'ì¤‘ê°„' },
          { name: 'ë² ë¦¬ìŠ¤íƒ€', acidRange: '0.6~0.8%', sugarRange: '10~12 Brix', acid: 0.7, sugar: 11, hardness: 'ë†’ìŒ' },
          { name: 'ë©”ë¦¬í€¸', acidRange: '0.3~0.6%', sugarRange: '12~15 Brix', acid: 0.45, sugar: 13.5, hardness: 'ë†’ìŒ' },
          { name: 'ì•„ë¦¬í–¥', acidRange: '0.4~0.7%', sugarRange: '11~14 Brix', acid: 0.55, sugar: 12.5, hardness: 'ì¤‘ê°„' },
          { name: 'ì£½í–¥', acidRange: '0.3~0.5%', sugarRange: '12~15 Brix', acid: 0.4, sugar: 13.5, hardness: 'ë†’ìŒ' },
          { name: 'ê¸ˆì‹¤', acidRange: '0.4~0.6%', sugarRange: '11~14 Brix', acid: 0.5, sugar: 12.5, hardness: 'ë†’ìŒ' }
        ];

        var minY = Math.min(...rawData.map(d => d.sugar)) - 0.5;
        var maxY = Math.max(...rawData.map(d => d.sugar)) + 0.5;

        var data = google.visualization.arrayToDataTable([
          ['ì‚°ë„ (%)', 'ë‹¹ë„ (Brix)', { role: 'annotation' }, { role: 'style' }, { role: 'tooltip', p: { html: true } }],
          ...rawData.map((d, index) => [
            jitter(d.acid),
            jitter(d.sugar),
            d.name,
            getColor(index),
            createTooltip(d)
          ])
        ]);

        function getColor(index) {
          const colors = ['#e74c3c', '#3498db', '#f39c12', '#2ecc71', '#9b59b6', '#1abc9c', '#d35400'];
          return colors[index % colors.length];
        }

        function createTooltip(d) {
          return `<div style="padding:8px; font-size:${getFontSize(20, 18)}px;">
                    <b>${d.name}</b><br>
                    ë‹¹ë„: ${d.sugarRange}<br>
                    ì‚°ë„: ${d.acidRange}<br>
                    ê²½ë„: ${d.hardness}
                  </div>`;
        }

        var options = {
          hAxis: { 
            title: 'ì‚°ë„ (%)',
            minValue: 0.3,
            maxValue: 0.8,
            viewWindow: { min: 0.3, max: 0.8 },
            gridlines: { color: '#ddd' },
            textStyle: { fontSize: getFontSize(22, 20) }, // Xì¶• ìˆ«ì í°íŠ¸ í¬ê¸° ì¡°ì ˆ
            titleTextStyle: { fontSize: getFontSize(24, 22), bold: true },
            ticks: [0.3, 0.4, 0.5, 0.6, 0.7, 0.8]
          },
          vAxis: { 
            title: 'ë‹¹ë„ (Brix)',
            minValue: minY,
            maxValue: maxY,
            gridlines: { color: '#ddd' },
            textStyle: { fontSize: getFontSize(22, 20) }, // Yì¶• ìˆ«ì í°íŠ¸ í¬ê¸° ì¡°ì ˆ
            titleTextStyle: { fontSize: getFontSize(24, 22), bold: true },
            ticks: [10, 11, 12, 13, 14, 15]
          },
          legend: 'none',
          pointSize: 18,
          dataOpacity: 0.9,
          annotations: { 
            textStyle: { fontSize: getFontSize(32, 24), bold: true, color: '#333', auraColor: 'white', opacity: 0.9 } // í¬ì¸íŠ¸ ì´ë¦„ í°íŠ¸ í¬ê¸° ì¦ê°€ (ìµœì†Œ 24px ìœ ì§€)
          },
          chartArea: { width: '80%', height: '80%' },
          tooltip: { trigger: 'focus', isHtml: true },
          backgroundColor: '#f9f9f9'
        };

        var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));

        function resizeChart() {
          var container = document.getElementById('chart_div');
          container.style.width = window.innerWidth + 'px';
          container.style.height = window.innerHeight + 'px'; // ğŸ”¹ ì „ì²´ í™”ë©´ í¬ê¸° ìœ ì§€
          chart.draw(data, options);
        }

        resizeChart();
        window.addEventListener('resize', resizeChart);
      }
    </script>
  </head>
  <body>
    <div id="chart_div"></div>
  </body>
</html>
